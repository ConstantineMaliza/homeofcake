<!DOCTYPE html>
<html lang="en">
  <head>
	<title>Home of cakes |Items</title>
	<link rel="icon" href="/images/LOGO HOME OF CAKES.jpg" type="image/x-icon"/>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <link href="https://fonts.googleapis.com/css?family=Poppins:200,300,400,500,600,700,800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Lora:400,400i,700,700i&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Amatic+SC:400,700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="css/open-iconic-bootstrap.min.css">
    <link rel="stylesheet" href="css/animate.css">
    
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link rel="stylesheet" href="css/owl.theme.default.min.css">
    <link rel="stylesheet" href="css/magnific-popup.css">

    <link rel="stylesheet" href="css/aos.css">

    <link rel="stylesheet" href="css/ionicons.min.css">

    <link rel="stylesheet" href="css/bootstrap-datepicker.css">
    <link rel="stylesheet" href="css/jquery.timepicker.css">

    
    <link rel="stylesheet" href="css/flaticon.css">
    <link rel="stylesheet" href="css/icomoon.css">
    <link rel="stylesheet" href="css/style.css">
  </head>
  <body class="goto-here">
	<div class="py-1 "style="background-color:#e92c75;">
    	<div class="container">
    		<div class="row no-gutters d-flex align-items-start align-items-center px-md-0">
	    		<div class="col-lg-12 d-block">
		    		<div class="row d-flex">
		    			<div class="col-md pr-4 d-flex topper align-items-center">
					    	<div class="icon mr-2 d-flex justify-content-center align-items-center"><span class="icon-phone2"></span></div>
						    <span class="text">+ 250 783 467 525</span>
					    </div>
					    <div class="col-md pr-4 d-flex topper align-items-center">
					    	<div class="icon mr-2 d-flex justify-content-center align-items-center"><span class="icon-paper-plane"></span></div>
						    <span class="text">homeofcake25@gmail.com</span>
					    </div>
					    <div class="col-md-5 pr-4 d-flex topper align-items-center text-lg-right">
						    <span class="text">order cake &amp; Get on time</span>
					    </div>
				    </div>
			    </div>
		    </div>
		  </div>
    </div>
    <nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light" id="ftco-navbar">
	    <div class="container">
	      <a class="navbar-brand" href="index.html"><span><img src="/images/LOGO HOME OF CAKES.jpg" class="img-fluid" alt="" style=" width: 8%;
			height: auto;"></span> Home of Cakes</a>
	      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav" aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
	        <span class="oi oi-menu"></span> Menu
	      </button>

	      <div class="collapse navbar-collapse" id="ftco-nav">
	        <ul class="navbar-nav ml-auto">
	          <li class="nav-item active"><a href="index.html" class="nav-link">Home</a></li>
	          <li class="nav-item"><a href="about.html" class="nav-link">About</a></li>
	          <li class="nav-item"><a href="services&product.html" class="nav-link">Products</a></li>
	          <li class="nav-item"><a href="tvetschool.html" class="nav-link">TVET</a></li>
			  <li class="nav-item"><a href="contact.html" class="nav-link">Contact</a></li>
	          <li class="nav-item"><a href="Register.html" class="nav-link">Register</a></li>
	        </ul>
	      </div>
	    </div>
	  </nav>
    <!-- END nav -->

    <div class="hero-wrap hero-bread" style="background-image: url('images/31.png');">
      <div class="container">
        <div class="row no-gutters slider-text align-items-center justify-content-center">
          <div class="col-md-9 ftco-animate text-center">
          	<p class="breadcrumbs"><span class="mr-2"><a href="index.html">Home</a></span> <span class="mr-2"><a href="index.html">of </a></span> <span>Cake</span></p>
            <h1 class="mb-0 bread">Order </h1>
          </div>
        </div>
      </div>
	</div>
	<section >
		<div class="card text-center">
			<div class="card-header">
			  <h5>Make Reservation<span><img src="images/29.png" alt="" width="50"height="50"> Home of Cakes</span></h5>
			</div>
			<div class="card-body container">
			  <!-- <h5 class="card-title"></h5> -->
			  <div class="card-text">
				<div class="cart-list">
					<table class="table-1">
						<thead class="thead-primary">
						  <tr class="text-center">
							<th>&nbsp;</th>										
							<th>Price</th>
							<th>Quantity</th>
							<th>Total</th>
						  </tr>
						</thead>
						<tbody>
							<tr class="text-center" id="ItemKey">
								<td class="image-prod"><img class="img" src=""></td>
								
								<td class="price"></td>
								
								<td class="quantity">
									<div class="input-group mb-3">
										<input type="number" name="quantity" id="quantity" class="quantity form-control input-number" value="1" min="1" max="100">
									</div>
								</td>
								
								<td id="total"></td>
							</tr><!-- END TR-->
						</tbody>
					  </table>
				  </div>
				  <form id="cake-info" class="billing-form">
					<h3 class="mb-4 billing-heading">Fill this information</h3>
			<div class="row align-items-end">
				<div class="col-md-4">
				<div class="form-group">
					<label for="firstname">First Name</label>
				<input type="text" name="firstname" id="firstname" class="form-control" placeholder="" disabled>
				</div>
		  </div>
		  <div class="col-md-4">
			<div class="form-group">
				<label for="middlename">Middle Name</label>
			  <input type="text" name="middlename" id="middlename" class="form-control" placeholder="" disabled>
			</div>
		</div>
		  <div class="col-md-4">
			<div class="form-group">
				<label for="lastname">Last Name</label>
			  <input type="text" name="lastname" id="lastname" class="form-control" placeholder="" disabled>
			</div>
		</div>
		  <div class="col-md-4">
			<div class="form-group">
				<label for="date">Date to retrieve</label>
			  <input  type="date" name="date" id="date" min="2014-05-11" class="form-control" placeholder="" >
			</div>
		</div>
		  <div class="col-md-4">
			<div class="form-group">
				<label for="time">Time</label>
			  <input type="time" name="time" id="time" class="form-control" placeholder="" >
			</div>
		
		</div>
		  <div class="col-md-4">
			<div class="form-group">
				<label for="Info">Other information on cake</label>
			  <textarea class="form-control" name="info" id="info" placeholder="I on my cake write this message....." ></textarea>
			</div>
		
		</div>
	
		</div>
	 
	</form><!-- END -->
			  </div>
			  <button onclick="writeOrder()" class="btn btn-primary">Order your cake</button>
			</div>
		
		  </div>
	
		
	</section >
	<br>
	<br>

    <footer class="ftco-footer ftco-section "  style="padding-bottom: 0%;">
		<div class="container">
			<div class="row">
				<div class="mouse">
						  <a href="#" class="mouse-icon">
							  <div class="mouse-wheel"><span class="ion-ios-arrow-up"></span></div>
						  </a>
					  </div>
			</div>
		  <div class="row mb-5">
			<div class="col-md">
			  <div class="ftco-footer-widget mb-4">
				<h2 class="ftco-heading-2">Home of Cakes</h2>
				<p>A special cake for special day, Baked by our family for your family<span><img src="images/29.png"width="40" height="40" alt=""></span></p>
				<ul class="ftco-footer-social list-unstyled float-md-left float-lft mt-5">
				  <li class="ftco-animate"><a href="#"><span class="icon-twitter"></span></a></li>
				  <li class="ftco-animate"><a href="#"><span class="icon-facebook"></span></a></li>
				  <li class="ftco-animate"><a href="#"><span class="icon-instagram"></span></a></li>
				</ul>
			  </div>
			</div>
			<div class="col-md">
			  <div class="ftco-footer-widget mb-4 ml-md-5">
				<h2 class="ftco-heading-2">Menu</h2>
				<ul class="list-unstyled">
				  <li><a href="about.html" class="py-2 d-block">About</a></li>
				  <li><a href="services&product.html" class="py-2 d-block">product</a></li>
				  <li><a href="contact.html" class="py-2 d-block">Contact Us</a></li>
				  <li><a href="Register.html" class="py-2 d-block">Login</a></li>
				  
				</ul>
			  </div>
			</div>
		  
			<div class="col-md">
			  <div class="ftco-footer-widget mb-4">
				  <h2 class="ftco-heading-2">Have a Questions?</h2>
				  <div class="block-23 mb-3">
					<ul>
					  <li><span class="icon icon-map-marker"></span><span class="text">ADEPR Gatenga</span></li>
					  <li><a href="#"><span class="icon icon-phone"></span><span class="text">+ 250 783 467 525</span></a></li>
					  <li><a href="homeofcake@gmail.com"><span class="icon icon-envelope"></span><span class="text">homeofcake@gmail.com</span></a></li>
					</ul>
				  </div>
			  </div>
			</div>
		  </div>
		  <div class="row">
		 
		  </div>
		</div>
	  </footer>

  <!-- loader -->
  <div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px"><circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/><circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="#F96D00"/></svg></div>

 
  <!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/7.6.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.6.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.6.1/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.6.1/firebase-storage.js"></script>
<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="https://www.gstatic.com/firebasejs/7.6.1/firebase-analytics.js"></script>

<script>
	// Your web app's Firebase configuration
	var firebaseConfig = {
	  apiKey: "AIzaSyAVrvfYpZI8Di8UrLLVWnBxRVt_kSKNoto",
	  authDomain: "home-of-cake.firebaseapp.com",
	  databaseURL: "https://home-of-cake.firebaseio.com",
	  projectId: "home-of-cake",
	  storageBucket: "home-of-cake.appspot.com",
	  messagingSenderId: "342936516946",
	  appId: "1:342936516946:web:45e435dc6f16d194b3228b",
	  measurementId: "G-3WLTFJYNTR"
	};
	// Initialize Firebase
	firebase.initializeApp(firebaseConfig);
	const auth = firebase.auth();
	const database = firebase.database();
	firebase.analytics();
  
	sessionStorage.getItem("userUID", user_id);

  function getUrlParameter(name) {
	 name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
	 var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
	 var results = regex.exec(location.search);
	 return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
  }
  
  var postUID = getUrlParameter("postuid");
  
  //post product for Wedding
  var price = document.querySelector('#ItemKey td.price');
  var itemTotal = document.querySelector('#ItemKey #total');
  var itemQuantity = document.querySelector('#ItemKey #quantity');
  var form = document.querySelector('#cake-info');
  var img = document.querySelector('#ItemKey img');
  var FullName = `${sessionStorage.getItem('FirstName')} ${sessionStorage.getItem('MiddleName')} ${sessionStorage.getItem('LastName')} `;
  
	database.ref("Wedding").child(postUID).on("value", function(snapshot){
		var { Photo, Price } = snapshot.val();
	  
	  img.src = Photo;
	  price.textContent = `${Price} Rwf`;
	  itemTotal.textContent = `${Price} Rwf`;
  
	  form.firstname.value = sessionStorage.getItem('FirstName');
	  form.middlename.value = sessionStorage.getItem('MiddleName');
	  form.lastname.value = sessionStorage.getItem('LastName');
	  
  });


  database.ref("Special").child(postUID).on("value", function(snapshot){
	  var { Photo, Price } = snapshot.val();
	
	img.src = Photo;
	price.textContent = `${Price} Rwf`;
	itemTotal.textContent = `${Price} Rwf`;

	form.firstname.value = sessionStorage.getItem('FirstName');
	form.middlename.value = sessionStorage.getItem('MiddleName');
	form.lastname.value = sessionStorage.getItem('LastName');
	
});

  database.ref("Birthday").child(postUID).on("value", function(snapshot){
	  var { Photo, Price } = snapshot.val();
	
	img.src = Photo;
	price.textContent = `${Price} Rwf`;
	itemTotal.textContent = `${Price} Rwf`;

	form.firstname.value = sessionStorage.getItem('FirstName');
	form.middlename.value = sessionStorage.getItem('MiddleName');
	form.lastname.value = sessionStorage.getItem('LastName');
	
});
 
  database.ref("Graduation").child(postUID).on("value", function(snapshot){
	  var { Photo, Price } = snapshot.val();
	
	img.src = Photo;
	price.textContent = `${Price} Rwf`;
	itemTotal.textContent = `${Price} Rwf`;

	form.firstname.value = sessionStorage.getItem('FirstName');
	form.middlename.value = sessionStorage.getItem('MiddleName');
	form.lastname.value = sessionStorage.getItem('LastName');
	
});
  

  
  itemQuantity.addEventListener('change', () => {
  
	  var val = itemQuantity.value;
	  var total = val * parseInt(price.textContent);
  
	  itemTotal.textContent = `${total} Rwf`;
  });
  
  var today = new Date();
  var dd = String(today.getDate()).padStart(2, '0');
  var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!
  var yyyy = today.getFullYear();
  
  form.date.min = `${yyyy}-${mm}-${dd}`;
  
  function writeOrder() {

	  var newKey = firebase.database().ref().child('Orders').push().key; 
	  
	  var updates = {};
	  updates['/orders/' + newKey] = {
		  FullName,
		  Photo: img.src,
		  Quantity: itemQuantity.value,
		  Total: parseInt(itemTotal.textContent),
		  Date: form.date.value,
		  Time: form.time.value,
		  Description: form.info.value
	};
	  updates['/user-orders/' + sessionStorage.getItem('userUID') + '/' + newKey] = {
		  FullName,
		  Photo: img.src,
		  Quantity: itemQuantity.value,
		  Total: parseInt(itemTotal.textContent),
		  Date: form.date.value,
		  Time: form.time.value,
		  Description: form.info.value
	};
  
	  firebase.database().ref().update(updates);
	  alert('Order Submitted!');

	  setTimeout(() => {
		  window.location.href = 'services&product.html';
	  }, 2000);

  }
  
  form.addEventListener('submit', writeOrder);
  
  </script>
  <script src="js/jquery.min.js"></script>
  <script src="js/jquery-migrate-3.0.1.min.js"></script>
  <script src="js/popper.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/jquery.easing.1.3.js"></script>
  <script src="js/jquery.waypoints.min.js"></script>
  <script src="js/jquery.stellar.min.js"></script>
  <script src="js/owl.carousel.min.js"></script>
  <script src="js/jquery.magnific-popup.min.js"></script>
  <script src="js/aos.js"></script>
  <script src="js/jquery.animateNumber.min.js"></script>
  <script src="js/bootstrap-datepicker.js"></script>
  <script src="js/scrollax.min.js"></script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false"></script>
  <script src="js/google-map.js"></script>
  <script src="js/main.js"></script>

 
  </body>
</html>